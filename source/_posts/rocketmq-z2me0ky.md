---
title: RocketMQ
date: '2024-09-18 11:27:01'
updated: '2024-10-10 10:51:49'
permalink: /post/rocketmq-z2me0ky.html
comments: true
toc: true
---

# RocketMQ

# 消息队列

### 作用

* 解耦：降低系统耦合性，模块之间不直接调用
* 异步：提高系统性能，减少响应所需的时间
* 削峰：限流，将高并发产生的消息放到消息队列中，服务慢慢去消费

### 主题模型

* 队列模型：最初的一种模型；生产者往某个队列里面发送消息，一个队列可以存储多个生产者的消息，一个队列也可以有多个消费者，但是消费者之间是竞争关系，每条消息只能被一个消费者消费。
* 主题模型（发布/订阅模型）：消息的发送方称为发布者（Publisher），消息的接收方称为订阅者（Subscriber），服务端存放消息的容器称为主题（Topic）。发布者将消息发送到主题中，订阅者在接收消息之前需要先“订阅主题”。“订阅”在这里既是一个动作，同时还可以认为是主题在消费时的一个逻辑副本，每份订阅中，订阅者都可以接收到主题的所有消息。

### 问题

* 可用性降低
* 复杂性提高
* 数据一致性问题

### 常见消息队列

|<br />|RabbitMQ|ActiveMQ|RocketMQ|Kafka|
| :--------------: | :--------------------------------------------------: | :---------------------------------------: | :-------------------: | :-----------------------------------------: |
|公司/社区|Mozilla|Apache|Alibaba|Apache|
|开发语言|Erlang|Java|Java|Scala&Java|
|协议支持|AMQP|OpenWire、STOMP、REST、XMPP、AMQP|自定义协议|自定义协议，社区封装了HTTP协议支持|
|客户端支持语言|官方支持Erlang、Java、Ruby等，社区几乎支持所有语言|Java、C、C++、Python、PHP、Perl、.net等|Java、C++（不成熟）|官方支持Java，开源社区有PHP、Python等版本|
|单机吞吐量|万级|万级|十万级|十万级|
|消息延迟|微秒级|毫秒级|毫秒级|毫秒级|
|可用性|高，基于主从架构实现可用性|高，基于主从架构实现可用性|非常高，分布式架构|非常高，分布式架构，一个数据多副本|
|消息可靠性|低|低|零丢失|零丢失|
|持久化|内存、文件|内存、文件、数据库|磁盘文件|磁盘文件|
|事务|不支持|支持|支持|不支持|

‍

# RocketMQ概念

‍
